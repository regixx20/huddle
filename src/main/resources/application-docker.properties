# --- DataSource (DOCKER) ---
# IMPORTANT : utilise le nom du service Postgres d√©fini dans docker-compose (vu dans tes logs: meat_easy_db)
spring.datasource.url=jdbc:postgresql://meat_easy_db:5432/meat_easy_db
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver

# --- JPA / Hibernate ---
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.globally_quoted_identifiers=true
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy

# --- Initialisation SQL ---
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true

# --- Pool (optionnel) ---
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=30000

# --- Logs ---
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# --- Mail (optional, values can be provided via environment variables) ---
app.mail.enabled=${MAIL_ENABLED:true}
spring.mail.host=${MAIL_HOST:}
spring.mail.port=${MAIL_PORT:25}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=${MAIL_SMTP_AUTH:false}
spring.mail.properties.mail.smtp.starttls.enable=${MAIL_SMTP_STARTTLS:false}
